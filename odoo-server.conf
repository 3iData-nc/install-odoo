
[options]
#
# WARNING:
#  If you use the Odoo Database utility to change the master password be aware  
#  that the formatting of this file WILL be LOST! A copy of this file named
#  /etc/odoo/odoo-server.conf.template has been made in case this happens
#  Note that the copy does not have any first boot changes
#-----------------------------------------------------------------------------
#
#-----------------------------------------------------------------------------
# Index:
#   Database Settings
#   Logs Settings
#   Service Settings
#   Email Settings
#   Server Options
#   Tuning Adjustments
#   Testing and Demo Settings
#-----------------------------------------------------------------------------



#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH
# Database Settings
#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH

#-----------------------------------------------------------------------------
# Master Database password
# This is used to create/remove db
#-----------------------------------------------------------------------------
admin_passwd = {{ODOO_PASS}} ;False

#-----------------------------------------------------------------------------
# Specify the database host (default localhost).
#-----------------------------------------------------------------------------
db_host = False

#-----------------------------------------------------------------------------
# Specify the database port (default None / 5432).
#-----------------------------------------------------------------------------
db_port = False

#-----------------------------------------------------------------------------
# Specify the database user name (default None).
#-----------------------------------------------------------------------------
db_user = {{ODOO_USER}}

#-----------------------------------------------------------------------------
# Specify the database password for db_user (default None) 
#-----------------------------------------------------------------------------
db_password = {{ODOO_PASS}} ;False

#-----------------------------------------------------------------------------
# Specify the database name.
#-----------------------------------------------------------------------------
db_name = False

#-----------------------------------------------------------------------------
# DataError: new encoding (UTF8) is incompatible with the encoding of the 
# template database (SQL_ASCII) HINT: Use the same encoding as in the template 
# database, or use template0 as template.
#-----------------------------------------------------------------------------
db_template = template1

#-----------------------------------------------------------------------------
# specify the the maximum number of physical connections to posgresql
#-----------------------------------------------------------------------------
db_maxconn = 64

#-----------------------------------------------------------------------------
# Display database list 
#-----------------------------------------------------------------------------
list_db = True

#-----------------------------------------------------------------------------
# Filter listed database REGEXP 
#-----------------------------------------------------------------------------
#dbfilter = .* ;will show database selector if there are more than one database
dbfilter = ^%h$ ;select database automatically by domain. E.g. http://portal.example.com will show "portal.example.com" database
#dbfilter = ^%d$ ;select database automatically by first subdomain (www is ignored). E.g. http://my.portal.example.com and http://www.my.portal.example.com will show database "my" 

#-----------------------------------------------------------------------------
# File Data Directory
#-----------------------------------------------------------------------------
data_dir=/opt/{{ODOO_USER}}/.local/share/Odoo


#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH
# Logs Settings
#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH
#
# I found information from Odoo on logging was not very clear. So I complied
# this helpful list and info about Odoo logging.
#
# Odoo uses the Python standard logging library. However, it uses a special 
# configuration syntax to configure logging levels for its modules. 
#
# It's helpful to know what each level type means, so below is quick list:
#
# Level meanings:
#    debug: Debug message for debugging only.
#     info: Information message to report important modular event.
#  warning: Warning message to report minor issues.
#    error: Error message to report failed operations.
# critical: A critical message -- so critical that the module cannot work
#
#
# log_level: 
#  any value in the list below. Odoo changed the log_level meaning 
#  here because these level values are mapped to a set of predefined
# 'module:log_level' pairs. These pairs are listed next to the log-level. 
# You could get the same result by using the log_handler option
#
#
# LOG LEVEL           / log_handler: module:log_level
# ----------------------------------------------------------------------------
# info                / [':INFO']
# critical            / ['openerp:CRITICAL', 'werkzeug:CRITICAL']
# error               / ['openerp:ERROR', 'werkzeug:ERROR']
# warn                / ['openerp:WARNING', 'werkzeug:WARNING']
# debug               / ['openerp:DEBUG']
# debug_sql           / ['openerp.sql_db:DEBUG']
# debug_rpc           / ['openerp:DEBUG','openerp.http.rpc.request:DEBUG']
# debug_rpc_answer    / ['openerp:DEBUG','openerp.http.rpc.request:DEBUG', 
#                       'openerp.http.rpc.response:DEBUG']
# End of Logging Info
#----------------------------------------------------------------------------

#-----------------------------------------------------------------------------
# The log filename. If not set, use stdout.
# should be set in run command (i.e. via --logfile)
#-----------------------------------------------------------------------------
#logfile = /var/log/odoo/odoo-server.log

#-----------------------------------------------------------------------------
# True/False. If True, create a daily log file and keep 30 files.
#-----------------------------------------------------------------------------
logrotate = True

#-----------------------------------------------------------------------------
# True/False. If True, also write log to 'ir_logging' table in database
#-----------------------------------------------------------------------------
log_db = False

#-----------------------------------------------------------------------------
# True/False logs to the system's event logger: syslog
#-----------------------------------------------------------------------------
syslog = False

#-----------------------------------------------------------------------------
# log_handler - can be a list of 'module:log_level' pairs. 
# The default value is ':INFO' -- it means the default logging level 
# is 'INFO' for all modules.
#-----------------------------------------------------------------------------
# uncomment below to activate debug logs
#log_handler = ['["[\':DEBUG\']"]']
#log_level = debug

#-----------------------------------------------------------------------------
# Log level - One of the following:
# info, debug_rpc, warn, test, critical, debug_sql, error, debug, 
# debug_rpc_answer
#-----------------------------------------------------------------------------
log_level = warn
login_message = False


#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH
# Service Settings
#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH

#-----------------------------------------------------------------------------
# Automatic reload of changed file on runtime
# Requires pyinotiy
#-----------------------------------------------------------------------------
auto_reload = False

#-----------------------------------------------------------------------------
# The IP address on which the server will bind.
# If empty, it will bind on all interfaces (default empty).
#-----------------------------------------------------------------------------
interface = localhost

#-----------------------------------------------------------------------------
# The TCP port on which the server will listen (default 8069).
#-----------------------------------------------------------------------------
port = 8069

#-----------------------------------------------------------------------------
# Launch server over https instead of http (default False).
#-----------------------------------------------------------------------------
secure = False

#-----------------------------------------------------------------------------
# Set to True if you are deploying your App behind a proxy
#-----------------------------------------------------------------------------
proxy_mode = True

#-----------------------------------------------------------------------------
# Specify the addons_path folders ordered by priority  
#-----------------------------------------------------------------------------
addons_path = /usr/local/src/odoo/addons,/usr/local/src/odoo/openerp/addons,/usr/local/src/odoo-addons,/usr/local/src/odoo-addons/ergobit,/usr/local/src/odoo-addons/x-community,/usr/local/src/odoo-addons/x-community-p,/usr/local/src/odoo-addons/OCA/account-financial-reporting,/usr/local/src/odoo-addons/OCA/account-financial-tools,/usr/local/src/odoo-addons/OCA/partner-contact,/usr/local/src/odoo-addons/OCA/hr,/usr/local/src/odoo-addons/OCA/pos,/usr/local/src/odoo-addons/OCA/commission,/usr/local/src/odoo-addons/OCA/web,/usr/local/src/odoo-addons/OCA/server-tools,/usr/local/src/odoo-addons/yelizariev/pos-addons,/usr/local/src/odoo-addons/yelizariev/website-addons,/usr/local/src/odoo-addons/yelizariev/addons-yelizariev,/usr/local/src/odoo-addons/yelizariev/odoo-saas-tools,/usr/local/src/odoo-addons/iledarn/e-commerce,/usr/local/src/odoo-addons/vauxoo,/usr/local/src/odoo-addons/xpansa/hr,/usr/local/src/odoo-addons/odoomrp/odoomrp-wip,/usr/local/src/odoo-addons/odoomrp/odoomrp-utils

#-----------------------------------------------------------------------------
# The file where the server pid will be stored (default False).
# We are letting the init script create the pid
#-----------------------------------------------------------------------------
# pidfile = False

#-----------------------------------------------------------------------------
# Compress reports
#-----------------------------------------------------------------------------
reportgz = False

#-----------------------------------------------------------------------------
# specify reference timezone for the server (e.g. Europe/Brussels)
#-----------------------------------------------------------------------------
timezone = Europe/Berlin

#-----------------------------------------------------------------------------
# specify the certificate file for the SSL connection
#-----------------------------------------------------------------------------
secure_cert_file = server.cert

#-----------------------------------------------------------------------------
# specify the private key file for the SSL connection
#-----------------------------------------------------------------------------
secure_pkey_file = server.pkey

#-----------------------------------------------------------------------------
# XML-RPC Secure Configuration (disabled if ssl is unavailable):
#   xmlrpcs - Set to False to disable the XML-RPC Secure protocol
#   xmlrpcs_interface - Specify the TCP IP address for the XML-RPC Secure 
#                       protocol. The empty string binds to all interfaces.
#   xmlrpcs_port - Specify the TCP port for the XML-RPC Secure protocol
#-----------------------------------------------------------------------------
xmlrpcs = True
xmlrpcs_interface = 127.0.0.1 
xmlrpcs_port = 8071

#-----------------------------------------------------------------------------
# XML-RPC Configuration:
#   xmlrpc - Set to False to disable the XML-RPC protocol
#   xmlrpc_interface - Specify the TCP IP address for the XML-RPC 
#                       protocol. The empty string binds to all interfaces.
#   xmlrpc_port - Specify the TCP port for the XML-RPC protocol
#-----------------------------------------------------------------------------
xmlrpc = True
xmlrpc_interface = 127.0.0.1
xmlrpc_port = 8069

#-----------------------------------------------------------------------------
# Long polling port:
#    TCP port for long-polling connections in multiprocessing or gevent mode, 
#    defaults to 8072. 
#-----------------------------------------------------------------------------
longpolling_port = 8072

#-----------------------------------------------------------------------------
# NET-RPC Configuration
#-----------------------------------------------------------------------------
netrpc = False
netrpc_interface = 
netrpc_port = 8070

#-----------------------------------------------------------------------------
# Use this for big data importation, if it crashes you will be able to continue
# at the current state. Provide a filename to store intermediate importation 
# states.
#-----------------------------------------------------------------------------
import_partial = /opt/{{ODOO_USER}}/.local/share/Odoo-Import/odoo.import.temp

#-----------------------------------------------------------------------------
# specify modules to export. Use in combination with --i18n-export
#-----------------------------------------------------------------------------
translate_modules = ['all']

#-----------------------------------------------------------------------------
# Use the unaccent function provided by the database when available
#-----------------------------------------------------------------------------
unaccent = False

#-----------------------------------------------------------------------------
# Comma-separated list of server-wide modules, default=web
#-----------------------------------------------------------------------------
server_wide_modules = None

#-----------------------------------------------------------------------------
# Further service settings
#------------------------------------------------------------------------------
csv_internal_sep = ,
debug_mode = False

static_http_document_root = None
static_http_enable = False
static_http_url_prefix = None


#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH
# Email Settings
#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH

#-----------------------------------------------------------------------------
# Specify the SMTP server for sending email (default localhost).
#-----------------------------------------------------------------------------
smtp_server = localhost

#-----------------------------------------------------------------------------
# Specify the SMTP user for sending email (default False).
#-----------------------------------------------------------------------------
smtp_user = False

#-----------------------------------------------------------------------------
# Specify the SMTP password for sending email (default False).
#-----------------------------------------------------------------------------
smtp_password = False

#-----------------------------------------------------------------------------
# if True, SMTP connections will be encrypted with SSL (STARTTLS)
#-----------------------------------------------------------------------------
smtp_ssl = False

#-----------------------------------------------------------------------------
# Specify the SMTP email address for sending email
#-----------------------------------------------------------------------------
email_from = False

#-----------------------------------------------------------------------------
# Specify the SMTP port
#-----------------------------------------------------------------------------
smtp_port = 25


#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH
# Tuning Options
#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH
#-----------------------------------------------------------------------------
# A word on tuning your Odoo Server
#-----------------------------------------------------------------------------
# A lot of time has gone in to testing this TKL appliance, and one thing we
# learned while testing was tuning. # 
# Most of this text here was taken from the Memory Matrix Discussion 
# https://github.com/DocCyblade/tkl-odoo/issues/49#issuecomment-148881166
# # It is important to note that you can run Odoo in threaded mode by setting 
# the workers option to 0 however there are some modules that won't work 
# and you loose fine grain control of resource management. 
# 
#-----------------------------------------------------------------------------
# the --workers is how many new process will be started to perform work or 
# (answer requests) The workers have limits upon them set by the limit_xxxxx
# options here in the config file. 
# 
# The "limit_memory_soft" limit is the amount of ram that when a process
# goes over this limit after it is done with the request it is terminated
# and the memory it was using is freed. This amount goes for each process
# 
# The hard limit is the amount of ram that if the process goes over it, 
# it WILL terminate right then. (I don't think this is really correct 
# because of the PDF issue we had and set this to 1.3 GB and never 
# saw a process take this much. but if its below 1.3GB PDF are not created)
# 
# The one we need to pay attention to is the limit_memory_soft. 
# As these workers will stay alive and hold on to memory until that limit 
# is reached. So if you have 5 workers and the soft limit is 256MB you could
# end up with 5 workers each taking 256MB that's 1.25GB of RAM that could
# be taken up. If you only had 1GB of ram you may need to dial back your
# workers or your soft limit.
# 
# It's a balancing act of sorts, I am also not sure if keeping the 
# workers at say 350 or 400 if there is some caching effect. Not sure
# why it's holding on to the memory.
# 
#-----------------------------------------------------------------------------
# 
# Hardware Matrix for recommended values:
#   (Note these are for REAL hardware, Virtual Hardware has it's own
#     issues that can arise with too many guest on a host with too many 
#     CPU cores etc, so remember that when looking at the chart below)
#    
#-----------------------------------------------------------------------------
# 
# Calculations on how we got the above chart and other info can be found
# 
# Memory Matrix Discussion
#   https://github.com/DocCyblade/tkl-odoo/issues/49
# 
# Shakedown Testing Discussions
#   https://github.com/DocCyblade/tkl-odoo/issues/52
#   https://github.com/DocCyblade/tkl-odoo/issues/53
#   https://github.com/DocCyblade/tkl-odoo/issues/54
#   https://github.com/DocCyblade/tkl-odoo/issues/55
# 
#-----------------------------------------------------------------------------



#-----------------------------------------------------------------------------
# Specify the number of workers, 0 disable prefork mode.
# if count is not 0 , enables multiprocessing and sets up the
# specified number of HTTP workers (sub-processes processing HTTP and RPC 
# requests). 
#-----------------------------------------------------------------------------
workers = 13 

#-----------------------------------------------------------------------------
# number of workers dedicated to cron jobs. Defaults to 2. The workers are 
# threads in multithreading mode and processes in multiprocessing mode.
#-----------------------------------------------------------------------------
max_cron_threads = 4

#-----------------------------------------------------------------------------
# Prevents the worker from using more than <limit> CPU seconds for each 
# request. If the limit is exceeded, the worker is killed
#-----------------------------------------------------------------------------
limit_time_cpu = 10800 ;necessary for long-running data imports

#-----------------------------------------------------------------------------
# Prevents the worker from taking longer than <limit> seconds to process a 
# request. If the limit is exceeded, the worker is killed.
#-----------------------------------------------------------------------------
limit_time_real = 14400  ;necessary for long-running data imports

#-----------------------------------------------------------------------------
# Maximum allowed virtual memory per worker. If the limit is exceeded, the 
# worker is killed and recycled at the end of the current request.
# 32212254720  /  81757531374
#-----------------------------------------------------------------------------
limit_memory_soft = 24000000000

#-----------------------------------------------------------------------------
# Hard limit on virtual memory, any worker exceeding the limit will be 
# immediately killed without waiting for the end of the current request 
# processing.
#
# Not sure of the reason but if this is set lower that 1.3GB then print jobs
# using PDF does not work. We are unsure why but this was the lowest amount
# for it to work: 1395864371
# 34359738368  /  68719476736
#-----------------------------------------------------------------------------
limit_memory_hard = 25000000000

#-----------------------------------------------------------------------------
# Number of requests a worker will process before being recycled and restarted.
#-----------------------------------------------------------------------------
; limit_request = 8196
limit_request = 100000

#-----------------------------------------------------------------------------
# Force a limit on the maximum number of records kept in the virtual osv_memory
# tables. The default is False, which means no count-based limit.
#-----------------------------------------------------------------------------
osv_memory_count_limit = False

#-----------------------------------------------------------------------------
# Force a limit on the maximum age of records kept in the virtual osv_memory 
# tables. This is a decimal value expressed in hours, and the default is 1 hour.
#-----------------------------------------------------------------------------
osv_memory_age_limit = 12.0



#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH
# Testing and Demo Settings
#HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH

#-----------------------------------------------------------------------------
# Enable YAML and unit tests.
#-----------------------------------------------------------------------------
test_enable = False

#-----------------------------------------------------------------------------
# Launch a python or YML test file.
#-----------------------------------------------------------------------------
test_file = False

#-----------------------------------------------------------------------------
# If set, will save sample of all reports in this directory.
#-----------------------------------------------------------------------------
test_report_directory = False

#-----------------------------------------------------------------------------
# Commit database changes performed by YAML or XML tests.
#-----------------------------------------------------------------------------
test_commit = False

#-----------------------------------------------------------------------------
# disable loading demo data for modules to be installed (comma-separated, use 
# "all" for all modules). Default is none
#-----------------------------------------------------------------------------
without_demo = 
demo = {}
